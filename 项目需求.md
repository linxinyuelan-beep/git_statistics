# Git Commit 统计桌面应用需求文档

## 项目背景
本项目旨在帮助开发者统计和分析每日的 Git 提交工作量，包括代码的增加、删除行数，支持多个仓库合并分析，并以可交互报表形式展示，便于发现高效时段和日期。

---

## 技术选型

- **后端采集与处理**：Rust（推荐，与 Tauri 天然契合，性能优异，内存安全）
- **桌面应用框架**：Tauri
- **前端展示**：React + ECharts
- **本地存储**：SQLite（缓存分析数据，提升性能）
- **Git 操作库**：git2-rs（Rust 生态成熟的 Git 库）

---

## 功能需求

### 1. 仓库管理
- 支持添加、删除多个本地 Git 仓库路径
- 自动遍历所有配置仓库，采集提交数据
- 支持仓库分组管理（如工作项目、个人项目、开源项目）
- 支持项目配置文件导入/导出，便于备份和迁移
- 记住用户常用的筛选条件和偏好设置

### 2. 数据采集
- 统计每次提交的作者、时间、增删行数
- 支持自定义统计时间段（今日、昨日、过去 24 小时、过去一周、过去一个月、任意起止日期）
- 支持按作者筛选（如只统计自己）
- 智能处理 merge commit，避免重复统计
- 支持忽略特定类型文件（生成文件、依赖文件、配置文件等）
- 提供数据校验功能，确保统计准确性

### 3. 数据处理与存储
- 合并多个仓库的数据，按时间聚合（小时、天、周、月）
- 统计每个时间段的总增删行数、提交次数
- 支持按作者、仓库、分支等维度筛选
- **本地数据缓存**：使用 SQLite 存储已分析的提交数据
- **增量更新**：只处理新的提交记录，避免重复解析
- **后台异步处理**：大仓库分析不阻塞界面，显示进度条
- 支持分析任务的暂停/恢复功能

### 4. 数据展示
- **基础图表**：
  - 24 小时柱状图：展示一天内每小时的代码增删量，分析高效时段
  - 7 天柱状图：展示一周内每天的代码增删量，分析高效日期
  - 日历热力图：以日历形式展示每日代码增删量，便于长期趋势观察
- **新增图表类型**：
  - 趋势折线图：展示代码量随时间的变化趋势
  - 饼图：展示不同仓库的代码贡献占比
  - 雷达图：多维度分析（提交频率、代码量、活跃时段等）
- **时间线功能**：
  - **统一时间线视图**：将多个项目的所有提交按时间顺序合并展示
  - **提交详情查看**：点击时间线上的提交点，显示具体提交内容
  - **提交信息展示**：包括提交消息、文件变更列表、增删行数详情
  - **差异对比**：支持查看具体的代码变更差异（diff）
  - **项目标识**：在时间线中清晰标识每个提交所属的项目/仓库
  - **分支信息**：显示提交所在的分支名称
  - **提交链接**：支持跳转到对应仓库的具体提交（如果是远程仓库）
- **交互功能**：
  - 仓库合并视图和单仓库视图切换
  - 鼠标悬停显示详细数据（如具体提交、增删行数）
  - 支持时间段、作者、仓库筛选
  - 图表联动（点击某天查看该天的小时分布）
  - 数据钻取（从月视图钻取到日视图）
  - 数据对比功能（如本周与上周对比）
  - **时间线交互**：支持时间线缩放、拖拽浏览历史提交
  - **提交搜索**：支持按提交消息、文件名、作者等搜索特定提交
- **界面优化**：
  - 支持深色/浅色主题切换
  - 响应式布局，适配不同屏幕尺寸
  - 快捷键支持（快速刷新、切换视图等）

### 5. 交互与扩展
- 本地运行，无需联网，支持 macOS/Windows/Linux
- 支持导出报表（如 PNG、CSV、HTML 时间线报告）
- 可扩展支持更多统计维度（如文件类型、分支等）
- **详细视图功能**：
  - 提交详情弹窗：展示完整的提交信息、变更文件列表
  - 代码差异查看器：内置 diff 查看器，支持语法高亮
  - 文件历史追踪：查看特定文件的提交历史
  - 提交关联分析：显示相关的提交、分支、标签信息

---

## 用户流程

1. 启动应用，配置需要统计的 Git 仓库路径
2. 选择统计时间段、作者等筛选条件
3. 查看交互式报表（柱状图、热力图等），可切换不同视图
4. **浏览统一时间线**：查看所有项目的提交按时间合并的统一视图
5. **查看提交详情**：点击时间线上的提交点，查看具体的提交内容、文件变更和代码差异
6. 鼠标悬停查看汇总数据，支持导出报表和时间线报告
7. **深度分析**：通过搜索和筛选功能，定位特定的提交或时间段进行详细分析

---

## 非功能需求

- **性能要求**：
  - 界面简洁美观，交互流畅
  - 数据处理高效，支持大仓库和多仓库
  - 大仓库分析时提供进度指示，不阻塞用户操作
  - 启动速度快，内存占用合理
- **可用性要求**：
  - 易于安装和升级，支持自动更新
  - 用户界面直观，学习成本低
  - 支持键盘快捷键操作
  - 提供详细的帮助文档和使用指南
- **兼容性要求**：
  - 本地运行，无需联网，支持 macOS/Windows/Linux
  - 支持主流 Git 版本和仓库格式
  - 适配不同分辨率和屏幕尺寸
- **安全性要求**：
  - 所有数据处理在本地进行，保护隐私
  - 支持敏感信息过滤（邮箱、用户名脱敏）
  - 提供数据清理功能，可删除缓存数据
- **扩展性要求**：
  - 预留插件接口，支持功能扩展
  - 配置化设计，统计规则和显示样式可定制
  - API 设计清晰，便于二次开发

---

## 未来扩展

- **远程仓库支持**：
  - 支持远程仓库统计（GitHub、GitLab、Bitbucket 等）
  - 集成 API 获取远程仓库数据
- **团队协作功能**：
  - 支持团队成员协作分析
  - 团队代码贡献度对比
  - 团队工作模式分析
- **高级分析功能**：
  - 支持更多报表类型（文件类型分析、分支对比等）
  - 代码质量分析（如代码复杂度、测试覆盖率等）
  - 技术债务追踪
- **集成与导出**：
  - 集成主流 IDE 插件
  - 支持更多导出格式（PDF、Excel、HTML 报告等）
  - 支持定时报告生成和邮件推送
- **人工智能功能**：
  - 基于历史数据的工作模式预测
  - 个性化效率提升建议
  - 异常工作模式检测和提醒

---

## 开发阶段规划

### 第一阶段（MVP）
- 基础仓库管理功能
- 核心数据采集和处理
- 基础图表展示（柱状图、热力图）
- 基本筛选和导出功能
- **统一时间线展示**：多项目提交合并时间线
- **基础提交详情**：点击查看提交信息和文件变更列表

### 第二阶段（功能完善）
- 高级图表类型
- 交互功能增强
- 性能优化和缓存机制
- 主题和界面优化
- **高级时间线功能**：时间线缩放、搜索、筛选
- **代码差异查看器**：内置 diff 查看器，支持语法高亮
- **文件历史追踪**：特定文件的提交历史分析

### 第三阶段（扩展功能）
- 插件系统
- 高级分析功能
- 团队协作功能
- AI 辅助分析
